!function(){!async function(){try{let t="/api/productos";const o=await fetch(t),i=await o.json();e=i.productos,n()}catch(e){console.log(e)}}();let e=[],t=[];function n(){!function(){const e=document.querySelector("#productos__lista");for(;e.firstChild;)e.removeChild(e.firstChild)}();(t.length?t:e).forEach(t=>{const o=document.createElement("LI");o.dataset.productoId=t.id,o.classList.add("lista__li");const i=document.createElement("P");i.innerHTML=`Descripción: <span> ${t.descripcion}</span> `;const c=document.createElement("P");c.innerHTML=`Código: <span> ${t.codigo}</span> `;const a=document.createElement("P");a.innerHTML=`Precio: <span>S/ ${t.precio}</span> `;const d=document.createElement("DIV");d.classList.add("li__info"),d.appendChild(i),d.appendChild(c),d.appendChild(a);const s=document.createElement("DIV");s.classList.add("li__acciones"),s.innerHTML=`<a href="/admin/productos/actualizar?id=${t.id}" class="li__acciones--a">Actualizar</a>`;const l=document.createElement("DIV");l.innerHTML='<input type="submit" value="Eliminar" class="acciones--div__input">',l.onclick=function(){!function(t){Swal.fire({title:"¿Quieres Eliminar este producto?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&async function(t){const{id:o}=t,i=new FormData;i.append("id",o);try{const t="http://localhost:3000/api/producto/eliminar",c=await fetch(t,{method:"POST",body:i});"exito"===(await c.json()).tipo&&(Swal.fire({title:"Eliminado!",text:"El Producto ha sido eliminado",icon:"success"}),e=e.filter(e=>e.id!==o),n())}catch(e){console.log(e)}}(t)})}({...t})},s.appendChild(l),o.appendChild(d),o.appendChild(s);document.querySelector("#productos__lista").appendChild(o)})}const o=document.querySelector("#buscador");o.addEventListener("keypress",(function(i){"13"==i.keyCode&&(palabra=o.value,t=e.filter(e=>e.descripcion.toLowerCase().includes(palabra.toLowerCase())||e.codigo.includes(palabra)),n())}))}();